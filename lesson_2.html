<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Lesson 2</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


<link rel="stylesheet" href="tutorial_style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Training</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="training_overview.html">Training Overview</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lesson_1.html">Lesson 1</a>
    </li>
    <li>
      <a href="lesson_2.html">Lesson 2</a>
    </li>
    <li>
      <a href="lesson_3.html">Lesson 3</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Use Cases
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="usecase_groundtruth.html">Use Case - Ground Truth</a>
    </li>
    <li>
      <a href="usecase_communitymap.html">Use Case - Community Map</a>
    </li>
    <li>
      <a href="usecase_erpdpilot.html">Use Case - Ground Truth (ERPD Pilot)</a>
    </li>
    <li>
      <a href="tonga_crop_survey_1.html">Tonga Crop Survey - Intro</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/livelihoods-and-landscapes">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="contact.html">
    <span class="fas fa-envelope fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Lesson 2</h1>

</div>


<div id="overview" class="section level2">
<h2>Overview</h2>
<p>In lesson 1 you created a geospatial dataset <em>simple_form.gpkg</em> and created a form to enter data into the attribute table for that dataset. In this lesson you will learn how to package this data for transfer to QField, how to collect data in the field using QField, and then sync field collected data back to a dataset on your desktop.</p>
</div>
<div id="qfield-sync-plugin" class="section level2">
<h2>QField Sync Plugin</h2>
<p>To start with you will need to open the QGIS project file <em>simple_form.qgs</em>. This will load your project into QGIS. You should check that the <em>QField Sync</em> plugin is installed.</p>
<p>Your QGIS screen with the <em>simple_form.qgs</em> project loaded should look like the below image.</p>
<center>
<div class="figure">
<img src="img/qgis_qgs_screen.png" width="640" alt="" />
<p class="caption">simple_form.qgs project loaded in QGIS</p>
</div>
</center>
<p>Next, you need to zoom in on Fiji or where you plan to collect data in the field. If you zoom in on Suva your <em>Map Canvas</em> should look like the image below.</p>
<center>
<div class="figure">
<img src="img/fiji_zoom.png" width="640" alt="" />
<p class="caption">Zoomed in on Suva</p>
</div>
</center>
<p>Save your project.</p>
<div id="qfieldsync-project-configuration" class="section level4">
<h4>QFieldSync: Project Configuration</h4>
<p>You will need to configure your project before packaging it for QField. To do this go to the <em>Plugins</em> menu then select <em>QFieldSync</em> and <em>Project Configuration</em>. Project configuration defines project characteristics relevant for collecting data in the field (i.e. configuring which layers can be edited offline or which layers to use as basemap images).</p>
<center>
<div class="figure">
<img src="img/project_configuration.png" width="640" alt="" />
<p class="caption">QField Sync - Project Configuration</p>
</div>
</center>
<p>Now, you need to set parameters in the <em>Configure Project for QField Synchronisation</em> widget. Set the <em>Action</em> for <em>simple_form</em> to <em>offline editing</em>. This means you can edit the form offline in QField. Next, select the <em>Create base map</em> checkbox and select <em>OpenStreetMap</em> as the basemap Layer. Then click on OK.</p>
<center>
<div class="figure">
<img src="img/configure_project_widget.png" width="640" alt="" />
<p class="caption">Configure project widget</p>
</div>
</center>
</div>
<div id="qfieldsync-package-for-qfield" class="section level4">
<h4>QFieldSync: Package for QField</h4>
<p>Go back to the <em>Plugins</em> menu and select <em>QFieldSync</em> and then <em>Package for QField</em>. The <em>Package project for QField</em> widget should appear. In the <code>...</code> scroll to you directory <em>export_form</em> and select this directory. Then click on <em>create</em>. This will create a copy of your project in the <em>export_form</em> directory which you can copy to your mobile device to edit in QField.</p>
<center>
<div class="figure">
<img src="img/package_for_qfield.png" width="640" alt="" />
<p class="caption">Package project for QField</p>
</div>
</center>
<p>If you were successful in packaging your project you should see the following files in your <em>export_form</em> directory.</p>
<center>
<div class="figure">
<img src="img/packaged_files_dir.png" width="640" alt="" />
<p class="caption">Project files packaged for QField</p>
</div>
</center>
<p><strong>Make sure you save your</strong> <strong><em>simple_forms.qgs</em></strong> <strong>project file at this point.</strong></p>
</div>
</div>
<div id="move-project-to-tablet" class="section level2">
<h2>Move Project to Tablet</h2>
<p>Connect your Android device to your desktop using a USB cable. Copy the <em>export_form</em> directory to your Android device’s internal storage (<strong>NOT</strong> the SD card). If you are working on a Mac then you may need to install the <a href="https://www.android.com/filetransfer/">Android File Transfer</a> application.</p>
</div>
<div id="qfield" class="section level2">
<h2>QField</h2>
<p>Open QField on your Android device.</p>
<div id="open-project" class="section level4">
<h4>Open Project</h4>
<p>Once QField has opened click on the menu icon in the top left of the display and then click on the cog icon and select <em>Open Project</em>. Scroll to where you copied <em>export_form</em> and select <em>export_form.qgs</em> to load the project into QField. The video below illustrates this approach.</p>
<center>
<video width="500px" controls>
<source src="video/open_project.mp4" type="video/mp4">
</video>
</center>
</div>
<div id="browser-mode" class="section level4">
<h4>Browser Mode</h4>
<p>At the top of the layers panel are two icons: a map and a pencil. Selecting the map icon means that you are in browse mode and you can visualise and query the geospatial layers loaded into your project.</p>
<center>
<video width="500px" controls>
<source src="video/browse_mode.mp4" type="video/mp4">
</video>
</center>
</div>
<div id="digitize-mode" class="section level4">
<h4>Digitize Mode</h4>
<p>If you select pencil icon you now enter digitize mode. In this mode you can digitize new features and fill in the attribute form and also edit features that you have already created or came pre-loaded with your project. Note, to edit a layer you will need to make sure that layer is selected (it is highlighted grey). The following video shows how to create a polygon feature and complete the attribute form for that layer.</p>
<center>
<video width="500px" controls>
<source src="video/create_feature.mp4" type="video/mp4">
</video>
</center>
</div>
<div id="gps" class="section level4">
<h4>GPS</h4>
<p>You can manually digitize points by moving the crosshairs cursor on the <em>Map Canvas</em> and using the basemap images as a guide. However, you can also track your GPS position and add vertices for your current location. You can do this by selecting the GPS icon in the bottom right hand corner highlighted in the image below.</p>
<center>
<div class="figure">
<img src="img/gps_cursor.png" width="640" alt="" />
<p class="caption">GPS icon highlighted in pink - select to create features at your current GPS location</p>
</div>
</center>
</div>
<div id="editing-saved-features" class="section level4">
<h4>Editing Saved Features</h4>
<p>If you are in digitize mode you can select a feature by clicking on it. You can then click on the <em>A</em> icon highlighted in pink below to edit the attribute form for the selected feature.</p>
<center>
<div class="figure">
<img src="img/edit_feature.png" width="640" alt="" />
<p class="caption">Edit feature icon</p>
</div>
</center>
<center>
<video width="500px" controls>
<source src="video/edit_features.mp4" type="video/mp4">
</video>
</center>
</div>
</div>
<div id="syncing-with-master-dataset" class="section level2">
<h2>Syncing with Master Dataset</h2>
<p>Once you have collected your data in the field you need to sync it back to your master dataset.</p>
<div id="copy-data-to-desktop" class="section level4">
<h4>Copy Data to Desktop</h4>
<p>Copy the <em>export_form</em> directory from your Android device to the <em>import_form</em> directory on your desktop. Your <em>import_form</em> directory should look like the image below.</p>
<center>
<div class="figure">
<img src="img/import_form_dir.png" width="640" alt="" />
<p class="caption">import_form directory with project copied from QField</p>
</div>
</center>
</div>
<div id="qfieldsync-synchronize-from-qfield" class="section level4">
<h4>QFieldSync: Synchronize from QField</h4>
<p>Go to the <em>Plugins</em> menu then select <em>QFieldSync</em> then select <em>Synchronize from QField</em>.</p>
<p>Click on the <code>...</code> icon and scroll to the <em>export_form</em> directory in the <em>import_form</em> directory. Then click on <em>Synchronize</em> and the data you collected using QField should sync with the master dataset on your computer.</p>
<center>
<div class="figure">
<img src="img/sync_project.png" width="640" alt="" />
<p class="caption">Synchronize from QField</p>
</div>
</center>
<p>You have now created a QGIS project, packaged it for QField, collected data in the field, and synced this data back to your desktop. The final lesson will cover the creation of more complex forms.</p>
<p>Finally, you can inspect the data you collected in QField in QGIS. Follow the process in the video below to use the <em>inspect features</em> function to query the attribute values for the data you collected in QField.</p>
<center>
<video width="500px" controls>
<source src="video/inspect_features.mp4" type="video/mp4">
</video>
</center>
<div class="tocify-extend-page" data-unique="tocify-extend-page" style="height: 0;">

</div>
<footer>
<p>
<hr>
</p>
</footer>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
